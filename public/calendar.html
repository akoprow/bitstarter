<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Fitspector: your workout calendar</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" type="text/css"
          href="//cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/2.3.2/css/bootstrap.min.css">
    <link rel="stylesheet" type="text/css"
          href="//cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/2.3.2/css/bootstrap-responsive.min.css">
    <link rel="stylesheet" href="css/hopscotch-0.1.1.min.css"></link>

    <style type="text/css">
      svg {
        shape-rendering: crispEdges;
      }
      .container {
        min-width: 950px;
        overflow: auto;
      }
      .sport-icon {
        width: 48px;
        height: 48px;
        max-width: 48px;
        border: 1px solid #333;
        border-radius: 10px;
      }
      #sport-summary .sport-icon {
        cursor: pointer;
      }
      #vis-calendar {
        margin-top: 2em;
        margin-bottom: 2em;
      }
      #vis-calendar .year {
        margin: auto;
        display: block;
      }
      #vis-calendar .monthLabel {
        font: 16px sans-serif;
      }
      #vis-calendar .year text {
        text-anchor: middle;
      }
      .legend-entry .box,
      #vis-calendar .day {
        fill: #fff;
        stroke-width: 1px;
      }
      #vis-calendar .day {
        stroke: #ccc;
      }
      .legend-entry .box {
        stroke: #666;
      }
      #vis-calendar .day:hover {
        fill: #f5f5f5;
        cursor: pointer;
      }
      #vis-calendar .day.future {
        fill: #f5f5f5;
      }
      #vis-calendar .month {
        fill: none;
        stroke: #000;
        stroke-width: 2px;
      }
      #vis-calendar .workout {
        pointer-events: none;
      }
      #selected-sport-filter {
        width: 130px;
      }
      .choice {
        display: inline-block;
        margin-left: 2em;
      }
      .centered {
        text-align: center;
        margin-left: auto;
        margin-right: auto;
        display: block;
      }
      #sport-summary {
        min-width: 580px;
      }
      #legend {
        min-width: 400px;
      }
      #sport-summary .data {
        display: block;
        position: relative;
      }
      #sport-summary .data .value {
        width: 50px;
        height: 20px;
        line-height: 20px;
        display: block;
        text-align: center;
        position: absolute;
        top: 0;
        font-size: 10pt;
        padding: 3px;
      }
      #sport-summary #unfilter {
        margin-top: 15px;
        margin-left: 60px;
        display: inline-block;
      }
      .unit,
      #sport-summary .data .value:after {
        font-size: 80%;
      }
      #sport-summary .sessions .data .value.hasData:after {
        content: 'x';
      }
      #sport-summary .time.total .data .value.hasData:after {
        content: 'h';
      }
      #sport-summary .distance .data .value.hasData:after {
        content: 'km';
      }
      #sport-summary .elevation .data .value.hasData:after {
        content: 'm';
      }
      #sport-summary tr.icon {
        height: 50px;
      }
      #sport-summary .icon td.data img {
        position: absolute;
        display: inline-block;
        top: 0;
        opacity: .8;
      }
      #sport-summary .icon td.data img:hover {
        opacity: 1.0 !important;
      }
      #sport-summary th {
        text-align: left;
        font-weight: normal;
        padding-right: 20px;
        text-align: right;
        padding: 3px;
      }
      #sport-summary .icon th {
        text-align: center;
      }
      #sport-summary .data-row:hover th,
      #sport-summary .data-row:hover td .value {
        background-color: #f5f5f5 !important;
      }
      #sport-summary .icon {
        margin: 0 15px;
      }

      .well .btn-group {
        display: block;
      }
      .well .year-selection,
      .well .help {
        margin-top: 10px;
      }

      .selected-day-workouts {
        height: 210px;
        max-height: 210px;
        overflow: hidden;
      }
      .workout {
        clear: both;
        height: 50px;
        overflow: hidden;
      }
      .workout .sport-icon {
        opacity: .8;
        background-color: white;
      }
      .workout .sport-icon {
        float: left;
        margin-right: 8px;
      }
      .workout .metric {
        margin-right: 10px;
      }
      .workout .metric-label {
        font-variant: small-caps;
      }

      #legend-size .mark {
        fill: #ccc;
      }
      .legend-entry .desc {
        text-anchor: middle;
        font-size: 7pt;
      }
      .legend-entry .text {
        vertical-align: top;
        display: inline-block;
        margin-right: 5px;
      }

      @media (min-width: 1200px) {
        #legend div {
          clear: both;
          float: right;
        }
      }
    </style>

    <script type="text/javascript"
            src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.0.3/jquery.min.js">
    </script>
    <script type="text/javascript"
            src="//cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/2.3.2/js/bootstrap.min.js">
    </script>
    <script type="text/javascript"
            src="//cdnjs.cloudflare.com/ajax/libs/d3/3.2.2/d3.v3.min.js">
    </script>
    <script type="text/javascript"
            src="//cdnjs.cloudflare.com/ajax/libs/underscore.js/1.5.1/underscore-min.js">
    </script>
    <script type="text/javascript"
            src="//ajax.googleapis.com/ajax/libs/angularjs/1.0.7/angular.min.js">
    </script>
    <script type="text/javascript" async
            src="js/hopscotch-0.1.1.min.js">
    </script>
  </head>
  <body ng-app="fitspector" ng-controller="VisCalendar">
    <div class="container">
      <div class="row-fluid centered">
        <div class="well">
          <div class="btn-group analysis-type-selection">
            <button type="button"
                    id="btn-mode"
                    class="btn btn-primary"
                    rel="{{{true: 'tooltip', false: ''}[type.id == 'climbs']}}"
                    data-toggle="tooltip"
                    data-title="Elevation analysis coming soon!"
                    data-placement="bottom"
                    ng-repeat="type in allDisplayTypes"
                    ng-class="{disabled: type.id == 'climbs', active: displayType.id == type.id}"
                    ng-click="setDisplayType(type)">
              <icon type="{{type.id}}" variant="white"></icon>
              <span ng-class="{'hidden-phone': displayType.id != type.id}" ng-bind="type.name"></span>
            </button>
          </div>
          <div class="btn-group year-selection">
            <button class="btn btn-primary" ng-class="{disabled:  disablePrevYear()}" ng-click="prevYear()">
              <i class="icon-white icon-chevron-left"></i>
            </button>
            <button class="btn btn-primary" ng-click="currentYear()" ng-bind="time.year"></button>
            <button class="btn btn-primary" ng-class="{disabled:  disableNextYear()}" ng-click="nextYear()">
              <i class="icon-white icon-chevron-right"></i>
            </button>
          </div>
          <button class="btn btn-mini btn-info help" ng-click="help()">
            <i class="icon-white icon-question-sign"></i> Help
          </button>
        </div>
      </div>
    </div>
    <div class="container-fluid">
      <div class="row-fluid">
        <div class="span6" id="sport-summary">
          <table>
            <tr class="icon">
              <th>
                <div class="btn-group">
                  <button type="button" class="btn btn-mini btn-primary" ng-repeat="type in allSportSummaryTypes"
                    ng-class="{active: sportSummaryType.id == type.id}"
                    ng-click="setSportSummaryType(type)"
                    ng-bind="type.name">
                  </button>
                </div>
              </th>
              <td class="data">
                <div id="unfilter" ng-show="sportFilter != 'all'">(Click again to clear the filter)</div>
              </td>
            </tr>
            <tr class="data-row sessions">
              <th><span class="text">Sessions <icon type="sessions"></icon></th>
              <td class="data"></td>
            </tr>
            <tr class="data-row time" ng-class="sportSummaryType.id">
              <th><span class="text">Time <icon type="time"></icon></th>
              <td class="data"></td>
            </tr>
            <tr class="data-row distance">
              <th><span class="text">Distance <icon type="distance"></icon></th>
              <td class="data"></td>
            </tr>
            <tr class="data-row elevation">
              <th><span class="text">Elevation gain <icon type="elevation"><icon></th>
              <td class="data"></td>
            </tr>
          </table>
        </div>
        <div class="span6" id="legend">
          <div><h3>Legend</h3></div>
          <div id="legend-size" class="legend-entry">
            <span class="text" ng-bind="getSizeLegendLabel()"></span>
            <svg></svg>
          </div>
          <div id="legend-color" class="legend-entry">
            <span class="text" ng-bind="getColorLegendLabel()"></span>
            <svg></svg>
          </div>
        </div>
      </div>
      <div class="row-fluid">
        <div id="vis-calendar"></div>
      </div>
    </div>
    <div class="container">
      <div class="row-fluid">
        <div class="span8 offset2">
          <div class="selected-day-workouts">
            <div class="well" ng-show="selectedDay">
              <button type="button" class="close" ng-click="selectedDay = null">&times;</button>
              <strong>{{selectedDayText()}}</strong>
              <workouts day="selectedDay"></workouts>
            </div>
          </div>
        </div>
      </div>
   </div>

    <script type="text/javascript" src="js/workouts.js"></script>
    <script type="text/javascript" src="js/vis-calendar.js"></script>
  </body>
</html>
