<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Fitspector: your workout calendar</title>
    <link rel="stylesheet" type="text/css"
          href="//cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/2.3.2/css/bootstrap.min.css">

    <script type="text/javascript"
            src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.0.3/jquery.min.js">
    </script>
    <script type="text/javascript"
            src="//cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/2.3.2/js/bootstrap.min.js">
    </script>
    <script type="text/javascript"
            src="//cdnjs.cloudflare.com/ajax/libs/d3/3.2.2/d3.v3.min.js">
    </script>
    <script type="text/javascript"
            src="//cdnjs.cloudflare.com/ajax/libs/underscore.js/1.5.1/underscore-min.js">
    </script>
    <script type="text/javascript"
            src="//ajax.googleapis.com/ajax/libs/angularjs/1.0.7/angular.min.js">
    </script>

    <style type="text/css">
      .sport-icon {
        width: 48px;
        height: 48px;
        max-width: 48px;
        border: 1px solid #333;
        border-radius: 10px;
      }
      #vis-calendar {
        margin-top: 2em;
        shape-rendering: crispEdges;
      }
      #vis-calendar .year {
        margin: auto;
        display: block;
      }
      #vis-calendar .monthLabel {
        font: 20px sans-serif;
      }
      #vis-calendar .year text {
        text-anchor: start
      }
      #vis-calendar .day {
        fill: #fff;
        stroke: #ccc;
        stroke-width: 1px;
      }
      #vis-calendar .day:hover {
        fill: #f5f5f5;
      }
      #vis-calendar .day.future {
        fill: #f5f5f5;
      }
      #vis-calendar .month {
        fill: none;
        stroke: #000;
        stroke-width: 2px;
      }
      #vis-calendar .workout {
        pointer-events: none;
      }
      #selected-sport-filter {
        width: 130px;
      }
      .choice {
        display: inline-block;
        margin-left: 2em;
      }
      .centered {
        text-align: center;
        margin-left: auto;
        margin-right: auto;
        display: block;
      }
      #sport-summary .data {
        display: block;
        position: relative;
      }
      #sport-summary .data .value {
        width: 50px;
        height: 20px;
        line-height: 20px;
        display: block;
        text-align: center;
        position: absolute;
        top: 0;
        font-size: 10pt;
        padding: 3px;
      }
      #sport-summary .data .value:after {
        font-size: 80%;
      }
      #sport-summary .sessions .data .value.hasData:after {
        content: 'x';
      }
      #sport-summary .time .data .value.hasData:after {
        content: 'h';
      }
      #sport-summary .distance .data .value.hasData:after {
        content: 'km';
      }
      #sport-summary .elevation .data .value.hasData:after {
        content: 'm';
      }
      #sport-summary tr.icon {
        height: 50px;
      }
      #sport-summary .icon td.data img {
        position: absolute;
        display: inline-block;
        top: 0;
        opacity: .8;
      }
      #sport-summary .icon td.data img:hover {
        opacity: 1.0 !important;
      }
      #sport-summary th {
        text-align: left;
        font-weight: normal;
        padding-right: 20px;
        text-align: right;
        padding: 3px;
      }
      #sport-summary .icon th {
        text-align: center;
      }
      #sport-summary .data-row:hover th,
      #sport-summary .data-row:hover td .value {
        background-color: #f5f5f5 !important;
      }
      #sport-summary .icon {
        margin: 0 15px;
      }

      .well .btn-group {
        display: block;
      }
      .well .year-selection,
      .well .help {
        margin-top: 10px;
      }
    </style>
  </head>
  <body ng-app="fitspector" ng-controller="VisCalendar">
    <div id="help-modal" class="modal hide fade" tabindex="-1" role="dialog">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
        <h3>Visuzalization explained</h3>
      </div>
      <div class="modal-body">
        <p>Few words about what you currently see:</p>
        <ul ng-repeat="info in getExplanations()">
          <li ng-bind-html-unsafe="info">
        </ul>
      </div>
      <div class="modal-footer">
        <a href="#" class="btn" data-dismiss="modal" aria-hidden="true">Close</a>
      </div>
    </div>
    <div class="container-fluid">
      <div class="row-fluid centered">
        <div class="well">
          <div class="btn-group analysis-type-selection">
            <button type="button" class="btn btn-primary"
                    ng-repeat="type in allDisplayTypes"
                    ng-class="{active: displayType.id == type.id}"
                    ng-click="setDisplayType(type)">
              <icon type="{{type.id}}" variant="white"></icon> <span class="hidden-phone" ng-bind="type.name"></span>
            </button>
          </div>
          <div class="btn-group year-selection">
            <button class="btn btn-primary" ng-class="{disabled:  disablePrevYear()}" ng-click="prevYear()">
              <i class="icon-white icon-chevron-left"></i>
            </button>
            <button class="btn btn-primary" ng-click="currentYear()" ng-bind="year.id"></button>
            <button class="btn btn-primary" ng-class="{disabled:  disableNextYear()}" ng-click="nextYear()">
              <i class="icon-white icon-chevron-right"></i>
            </button>
          </div>
          <button class="btn btn-mini btn-info help" data-toggle="modal" data-target="#help-modal">
            <i class="icon-white icon-info-sign"></i> Help me understand what I see
          </button>
        </div>
      </div>
      <div class="row-fluid">
        <div class="span6">
          <table id="sport-summary">
            <tr class="icon">
              <th>
                <div class="btn-group">
                  <button type="button" class="btn btn-mini btn-primary" ng-repeat="type in allSportSummaryTypes"
                    ng-class="{active: sportSummaryType.id == type.id}"
                    ng-click="setSportSummaryType(type)"
                    ng-bind="type.name">
                  </button>
                </div>
              </th>
              <td class="data"></td>
            </tr>
            <tr class="data-row sessions">
              <th><span class="text">Sessions <icon type="sessions"></icon></th>
              <td class="data"></td>
            </tr>
            <tr class="data-row time">
              <th><span class="text">Time <icon type="time"></icon></th>
              <td class="data"></td>
            </tr>
            <tr class="data-row distance">
              <th><span class="text">Distance <icon type="distance"></icon></th>
              <td class="data"></td>
            </tr>
            <tr class="data-row elevation">
              <th><span class="text">Elevation gain <icon type="elevation"><icon></th>
              <td class="data"></td>
            </tr>
          </table>
        </div>
        <div class="span6">
          <div class="alert alert-info" ng-show="selectedDay">
            <button type="button" class="close" ng-click="selectedDay = null">&times;</button>
            <strong>{{selectedDayText()}}</strong>
            <workouts day="selectedDay"></workouts>
          </div>
        </div>
      </div>
      <div class="row-fluid">
        <div id="vis-calendar"></div>
      </div>
    </div>

    <script type="text/javascript" src="/js/workouts.js"></script>
    <script type="text/javascript" src="/js/vis-calendar.js"></script>
  </body>
</html>
